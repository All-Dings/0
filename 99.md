# First Git Experiments

Yesterday I had the great (?) Idea to store the Git Repositories of every Day in my Clash of Clans Project itself.

But wouldn't that blow up the Clash of Clans Size?

Fortunately there is Git's Large File Support (LFS) that in theory should allow me to keep Clash of Clans small and download Big Data only on Demand.

But Caution is the Mother of the Porcelain Box, so let's make some Experiments first.

## Setup Docker

Yesterday I created a Dockerfile for this Project, therefore I use that now to build a Docker Image. But first we have to get a fresh Copy from GitHub:

```console
michael-holzheu@MacBook/~ $ git clone git@github.com:michael-holzheu/Clash-of-Clans.git
Cloning into 'Clash-of-Clans'...
remote: Enumerating objects: 173, done.
remote: Counting objects: 100% (173/173), done.
remote: Compressing objects: 100% (105/105), done.
remote: Total 173 (delta 76), reused 164 (delta 67), pack-reused 0
Receiving objects: 100% (173/173), 26.50 KiB | 3.79 MiB/s, done.
Resolving deltas: 100% (76/76), done.
```

To build the Docker Image I need the Dockerfile from Yesterday:

```console
michael-holzheu@MacBook/Clash-of-Clans $ head 18.dockerfile 
# # Dockerfile for this Project

# ## Build and run Docker Image
# ```
# $ docker build -t mm -f 18.dockerfile .
# $ docker run -ti --rm mm bash
# ```

# # Define Base Image

```

Now let's build the Image according to my own Instructions:


```console
michael-holzheu@MacBook/Clash-of-Clans $ docker build -t mm -f 18.dockerfile .
[+] Building 29.2s (19/19) FINISHED                                                                         
 => [internal] load build definition from 18.dockerfile                                                0.0s
 => => transferring dockerfile: 1.05kB                                                                 0.0s
 => [internal] load .dockerignore                                                                      0.0s
 => => transferring context: 2B                                                                        0.0s
 => [internal] load metadata for docker.io/library/ubuntu:22.04                                        1.2s
 => [ 1/14] FROM docker.io/library/ubuntu:22.04@sha256:67211c14fa74f070d27cc59d69a7fa9aeff8e28ea118ef  0.0s
 => [internal] load build context                                                                      0.1s
 => => transferring context: 1.30MB                                                                    0.1s
 => CACHED [ 2/14] WORKDIR root                                                                        0.0s
 => [ 3/14] COPY . .                                                                                   0.0s
 => [ 4/14] RUN apt-get update                                                                         2.4s
 => [ 5/14] RUN yes | unminimize                                                                      10.7s
 => [ 6/14] RUN apt-get install -y bash-completion                                                     1.2s 
 => [ 7/14] RUN rm -f .bashrc                                                                          0.2s 
 => [ 8/14] RUN ln -s 14.bashrc .bashrc                                                                0.2s 
 => [ 9/14] RUN apt-get install -y man                                                                 1.9s 
 => [10/14] RUN apt-get install -y git                                                                 5.8s 
 => [11/14] RUN apt-get install -y git-lfs                                                             1.7s 
 => [12/14] RUN ln -s 15.gitconfig .gitconfig                                                          0.2s 
 => [13/14] RUN apt-get install -y vim                                                                 3.0s 
 => [14/14] RUN ln -s 13.vimrc .vimrc                                                                  0.2s 
 => exporting to image                                                                                 0.4s 
 => => exporting layers                                                                                0.4s 
 => => writing image sha256:e07685ce65b90a658efa1e49429135306aa33ceead9d9767c533587a447c9856           0.0s 
 => => naming to docker.io/library/mm                                                                  0.0s 
                                                                                                            
Use 'docker scan' to run Snyk tests against images to find vulnerabilities and learn how to fix them
```

Cool, that seems to have worked, so where is my new Baby?


```console
michael-holzheu@MacBook/Clash-of-Clans $ docker images | grep mm
mm                latest    e07685ce65b9   3 minutes ago   308MB

```

Looks good, let's run the Thing:


```console
michael-holzheu@MacBook/Clash-of-Clans $ docker run -ti --rm mm bash          
root:~ (Master)# ls
0.md   13.md      15.gitconfig  17.bash        2.md     3.md   33.bash  4.md   6.markdown  8.md
1.md   13.vimrc   15.md         17.markdown    2015.md  30.md  33.md    40.md  6.md        9.md
11.md  14.bashrc  16.bash       17.md          24.bash  31.md  34.md    41.md  7.md        904.md
12.md  14.md      16.md         18.dockerfile  27.md    32.md  37.bash  5.md   8.jpg       README.mdA
```

As already mentioned, I want to create a Branch for each Day. Therefore I plan to use my daily Tags to find correct Commits for branching off:

```console
root:~ (Master)# git tag -l                        
Day-0
Day-1
Day-2
```

Perfect, now I easily can create my three new Branches:


```console
root:~ (Master)# git branch Day-0.branch Day-0       
root:~ (Master)# git branch Day-1.branch Day-1
root:~ (Master)# git branch Day-2.branch Day-2
```

When lisiting them, I notice that we are already on the Master Branch:

```console
root:~ (Master)# git branch -l
  Day-0.branch
  Day-1.branch
  Day-2.branch
* Master
```

Perfect, so let's now publish the new Babies on GitHub:


```console
root:~ (Master)# git push -u origin Day-0.branch
The authenticity of host 'github.com (140.82.121.3)' can't be established.
ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```

Umm, what does that Error Message wants to tell us?

Unfortunately I forgot what "Fingerprint" exactly means, my bad! But I gloomy remember that I always responded 'y' to that question:


```console
root:~ (Master)# git push -u origin Day-0.branch
Are you sure you want to continue connecting (yes/no/[fingerprint])? y  
Please type 'yes', 'no' or the fingerprint: 
```

Ooops, wrong again, so let's better say clearly 'yes' now:

```console
Please type 'yes', 'no' or the fingerprint: yes
Warning: Permanently added 'github.com' (ED25519) to the list of known hosts.
git@github.com: Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.

```

Hmm, that's not what I wanted. Searching my memories I darkly remember that we need an [RSA](1977.md) Key Pair for pushing Things to the remote Repository.

Probably the Unexperienced fellow Reader may ask, what is that good for?

Well, when I want to upload Something, the Git Server has to know somehow that this really comes from me. Otherwise everybody could dump Garbage to my beautiful Project.

The whole thing is called [Authentification](47.md).

But now I think we really need a real [Expert]() for all this complicated Stuff, so let's call [Micha](18.md) for helping us a little bit.

Well that was really at the right Time, because while committing our Expert, I notice the next Problem:

```console```
michael-holzheu@MacBook/Work:Clash-of-Clans $ git commit -s -m "Add Micha" 
[Master d950f65] Add Micha
 Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 7 insertions(+)
 create mode 100644 18.md

```

Fortunately no more my Problem. I will go outside, buy some Cigarettes and look for a ... Coffee while Micha does his work.

## Micha fixes all the Mess (again)

After Michael Holzheu has handed over his Mac Book to our Computer Expert, Micha starts his Investigation.

### Fix the last Commit

Hmm, obviously my Boss messed up Something and probably it has to do something with the Git configuration. So let's check first his "work" with the Command ...


```console
$ git log
```

Interesting, this is really a lot of output with a lot of funny E-Mail Adresses:

```
commit 5abac87428bd125919afe1426feb38bc1b6a8abb (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    Micha takes over
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit d950f65dc9f2c9379ced5266f60d19f7b6bcde48
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:22:08 2023 +0200

    Add Micha
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit fbcb14b939f518736294c043f495443d6d0cd8b3
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:20:00 2023 +0200

    Call Micha
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit 0d906eb08630a7230b04e10955645968b851ee2d
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 18:21:14 2023 +0200

    Add First Git Experiments
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit 1fdb79965bd29d6e2d9645a5e67e5b7b32599b5e (origin/Master, origin/HEAD)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 17:43:20 2023 +0200

    Add User Identifier
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit 934ac3a79ae8bc4702327bab03395cd7812e304c
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 16:12:16 2023 +0200

    Add RSA
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>

commit c1a450b9a92046d8f8627c1509e000d5db0db383 (tag: Day-2)
Author: Michael Holzheu <michael@holzheu.de>
Date:   Mon Mar 27 03:23:23 2023 +0000

    Use correct Things
    
    Signed-off-by: Michael Holzheu <michael@holzheu.de>
```
And sometimes this Chatterbox makes me really angry. And BTW what exatly does Michael mean with his last commmit:

```
commit 5abac87428bd125919afe1426feb38bc1b6a8abb (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    Micha takes over
   
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
```

This is really Boss Style, isn't it? Sometimes I have the Impression that Michael does not worthy my Work enough. So maybe it's time to bring the Lady a little bit more down to earth, so let's improve first Commit Message with the Command ...


```console
$ git commit --amend

```

And on the occasion I will also mark the Sentence with two Hashes for emphasizing my disapproval:

```
## Micha fixes all the Mess

# Your branch is ahead of 'origin/Master' by 4 commits.
#   (use "git push" to publish your local commits)
#
# Changes to be committed:
#       modified:   99.md
#
# Changes not staged for commit:
#       modified:   99.md
```

But wait, can this work at all? Because the Hash Character nomally marks Comments, I assume Git will most likely ignore my Idea. I am almost 100% sure, but since I alreay saw Hourses puck, let's give it a try:

```
:wq
```

Ah ja, the Command ends without ann Error Message, as expected! And although I already know the Result, to be sure let's check the Commit Message with the Command ...

```console
$ git log -n1
```

I can't believe it, looks like the Version Control silently ignored my complete Update:


```console
commit b81b6ee01b1601e63432734e0141159aa58b92c6 (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    Micha takes over
    
    Signed-off-by: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
```

Whatever - as every Student in the first Semester should know - for those situations we invented the so called Escape Characters. So next fire up the Command ...


```console
$ git commit --amend

```

And this time we put a Backslash to escape the first problematic Hash Character:

```console
\## Micha fixes all the Mess

Signed-off-by: Michael Holzheu <michael@holzheu.de>

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
#
# Date:      Mon Mar 27 19:30:15 2023 +0200
# Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
#
# On branch Master
# Your branch is ahead of 'origin/Master' by 4 commits.
#   (use "git push" to publish your local commits)
#
# Changes to be committed:
#       modified:   99.md
#
# Changes not staged for commit:
#       modified:   99.md
```

Looks good, do it so, bam!

```console
:wq
```

Ah yes, this time I get at least the known Error Messages again:

```
[Master 0a2e6ef] \## Micha fixes all the Mess
 Date: Mon Mar 27 19:30:15 2023 +0200
 Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 25 insertions(+)
```

Git also tells me that one File has been changed with 25 Insertions. An ordinary Mortal might ask, why Git changed the File Content, since we only wanted to update the Commit Message.

Well that's of course somehow true, but real Git Experts know of course that those Messages can be silently ignored.

So now I have everything in place, but as we know in Germany, Double holds better:

```console
michael-holzheu@MacBook/Work:Clash-of-Clans $ git log -n 1
commit 0a2e6ef7ea96dd5ad1dc1b12c97fd9f8575fcd0d (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    \## Micha fixes all the Mess
    
    Signed-off-by: Michael Holzheu <michael@holzheu.de>
```

Ah ja, for some strange Reason Git included my Escape Character into the Message. Hmmm, so let's ask [Google](10000.md) with the Search String ...

![git commit escape #](10001.jpg)

Very nice, already the second Hit returns a very promising [Stack Overflow](20000.md) question:

![Start a Git commit message with a hashmark #](20003.jpg)

The Colleague seems to work with a Tracking System where the Ticket Numbers all start with a Hash...Mark.

Like me, he thought that the Hash...Mark solves his problem. And in his desperate situation he even tried the Exclamation...Mark, interesting ...

So, to make a long story short, finally the answer for the question is to use the Command ...

```console
$ git commit --amend --cleanup=whitespace
```

Nice, this time I only have to remove the Escape Character from the alreay almost fixed Commit Message:

```
\## Micha fixes all the Mess

Signed-off-by: Michael Holzheu <michael@holzheu.de>

# Please enter the commit message for your changes. Lines starting
# with '#' will be kept; you may remove them yourself if you want to.
# An empty message aborts the commit.
#
# Date:      Mon Mar 27 19:30:15 2023 +0200
# Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
#
# On branch Master
# Your branch is ahead of 'origin/Master' by 4 commits.
#   (use "git push" to publish your local commits)
#
# Changes to be committed:
#       modified:   99.md
#
# Changes not staged for commit:
#       modified:   99.md
```

On the occasion I modify the Message a bit more and append the Adverb "again" to my important Claim:

```
## Micha fixes all the Mess (again)

Signed-off-by: Michael Holzheu <michael@holzheu.de>

# Please enter the commit message for your changes. Lines starting
# with '#' will be kept; you may remove them yourself if you want to.
# An empty message aborts the commit.
#
# Date:      Mon Mar 27 19:30:15 2023 +0200
# Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
#
# On branch Master
# Your branch is ahead of 'origin/Master' by 4 commits.
#   (use "git push" to publish your local commits)
#
# Changes to be committed:
#       modified:   99.md
#
# Changes not staged for commit:
#       modified:   99.md
```

But a real Computer Expert of course knowsthat we have to do a bit more - what could that be?

Well, my current assumtion is that with the new Command Option, all the Git Comments will be treated as normal Information and therefore included in the Commit, but ... let's try it:

```
:wq!
```

Ah Ja, here again the already known Git Error Messages:

```console
michael-holzheu@MacBook/Work:Clash-of-Clans $ git commit --amend --cleanup=whitespace
[Master 004c644] ## Micha fixes all the Mess (again)
 Date: Mon Mar 27 19:30:15 2023 +0200
 Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 25 insertions(+)
```

But now comes the Moment of Truth: I bet 10 Euros that we will see all the Comments in the Commit Message now. If not, I will give the Money to my dear Flatmat, promised. So let's see what happens:

```
michael-holzheu@MacBook/Work:Clash-of-Clans $ git show
commit 004c644c6a175ec5bc5cd4305c3c8675415cc7aa (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    ## Micha fixes all the Mess (again)
    
    Signed-off-by: Michael Holzheu <michael@holzheu.de>
    
    # Please enter the commit message for your changes. Lines starting
    # with '#' will be kept; you may remove them yourself if you want to.
    # An empty message aborts the commit.
    #
    # Date:      Mon Mar 27 19:30:15 2023 +0200
    # Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
    #
    # On branch Master
    # Your branch is ahead of 'origin/Master' by 4 commits.
    #   (use "git push" to publish your local commits)
    #
    # Changes to be committed:
    #       modified:   99.md
    #
    # Changes not staged for commit:
    #       modified:   99.md
```

Of course I was right, but to be honest, even I was not 100% sure. Therefore I only bet 10 Euros and not 10.000.000 Euros.

Vorsicht ist die Mutter der Porzellankiste [^1] or as my friend from America would perhaps put it, Better safe than sorry [^2].

But now we are really 99,9999% sure, [HowTo](100001.md) to include leading Hashes in a Git Commit Message, so let's do another ...

```(console)
$ git commit --amend --cleanup=whitespace
```

Real Vim Experts know of course already, [HowTo](100002.md) delete [best](300001.md) the unwanted Git Comments, voici le résultat final:

```
## Micha fixes all the Mess (again)

Signed-off-by: Michael Holzheu <michael@holzheu.de>
```

And now let's finish this long Story:


```
:wq
```

Ah Ja, The Error Messages again:

```
[Master 7952f1a] ## Micha fixes all the Mess (again)
 Date: Mon Mar 27 19:30:15 2023 +0200
 Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 25 insertions(+)
```

One *very* last Verification with ...

```
$ git show
```

And then we realize that we made the World a bit better now:

```
commit 7952f1a22a78875995084ba73233e53f7eebc9ab (HEAD -> Master)
Author: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
Date:   Mon Mar 27 19:30:15 2023 +0200

    ## Micha fixes all the Mess (again)
    
    Signed-off-by: Michael Holzheu <michael@holzheu.de>

diff --git a/99.md b/99.md
index fa5a1e7..d417d8e 100644
--- a/99.md
+++ b/99.md
@@ -169,3 +169,28 @@ Well, when I want to upload Something, the GitHub Server has to know somehow tha
 The whole thing called [Authentification](47.md).
 
 But now I think we really need an [Expert]() for all this complicated Stuff, so let's call [Micha]() to cleanup that Mess for us!
+
+Well that was really the right Time, because while creating our Expert, I notice the next Problem:
+
+```console```
+michael-holzheu@MacBook/Work:Clash-of-Clans $ git commit -s -m "Add Micha" 
+[Master d950f65] Add Micha
+ Committer: Michael Holzheu <michael-holzheu@MacBook-Pro-von-Michael.local>
+Your name and email address were configured automatically based
+on your username and hostname. Please check that they are accurate.
+You can suppress this message by setting them explicitly. Run the
+following command and follow the instructions in your editor to edit
+your configuration file:
+
+    git config --global --edit
+
+After doing this, you may fix the identity used for this commit with:
+
+    git commit --amend --reset-author
+
+ 1 file changed, 7 insertions(+)
+ create mode 100644 18.md
+
+```
+
+Fortunately no more my Problem. I will go outside, buy some Cigarettes and look for a Coffee while Micha does his work
```

Looks fine, so now let's look what we created on our way up to here and use ...

```console
$ git status
```

I see a lot of Work Files that now have to be commited:

```
On branch Master
Your branch is ahead of 'origin/Master' by 5 commits.
  (use "git push" to publish your local commits)

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   14.bashrc
	modified:   99.md

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	10000.jpg
	10000.md
	100001.md
	100002.md
	10001.jpg
	20.md
	20000.md
	20001.md
	20003.jpg
	300001.md
	300002.md
	300003.md
	48.md
	58.md
```

So let's prepare them with ...

```
$ git add *.md *.jpg *.bashrc
```

And finally dump all the good stuff to Git with ...

```console
$ git commit -s --author="Michael Holzheu <michael@holzheu.de>" -m "Add Work for my Boss"
[Master 66813be] Add Work for my Boss
 17 files changed, 587 insertions(+)
 create mode 100644 10000.jpg
 create mode 100644 10000.md
 create mode 100644 100001.md
 create mode 100644 100002.md
 create mode 100644 10001.jpg
 create mode 100644 20.md
 create mode 100644 20000.md
 create mode 100644 20001.md
 create mode 100644 20003.jpg
 create mode 100644 300001.md
 create mode 100644 300002.md
 create mode 100644 300003.md
 create mode 100644 48.md
 create mode 100644 58.md
 create mode 100644 737.jpg
```

## The Boss comes back

Right at that Moment Michael comes back from his Journey and says, "Thank you Micha, I will take over now again!"

```
  \ /
  0|0
  ---
   v
```

Have a Good Night und Gute N8!

Holyheu
